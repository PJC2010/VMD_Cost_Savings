<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VillageMD | Adherence Program Impact Analysis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .kpi-card {
            background-color: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .kpi-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto p-4 md:p-8">
        <!-- Header -->
        <header class="text-center mb-10">
            <h1 class="text-3xl md:text-4xl font-bold text-blue-800">Adherence Program Impact Analysis</h1>
            <p class="text-lg text-gray-600 mt-2">VillageMD Quality Specialist Team | FY 2024 Initiative</p>
        </header>

        <!-- Key Performance Indicators -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10 text-center">
            <div class="kpi-card">
                <h3 class="text-lg font-semibold text-gray-500">Adherence Uplift</h3>
                <p id="adherence-uplift" class="text-4xl font-bold text-green-600 mt-2">+0%</p>
                <p class="text-sm text-gray-500 mt-1">Increased likelihood of adherence for Group 1</p>
            </div>
            <div class="kpi-card">
                <h3 class="text-lg font-semibold text-gray-500">Hospitalization Reduction</h3>
                <p id="hospitalization-reduction" class="text-4xl font-bold text-green-600">-0%</p>
                <p class="text-sm text-gray-500 mt-1">Decrease in admissions/1k patients for Group 1</p>
            </div>
            <div class="kpi-card">
                <h3 class="text-lg font-semibold text-gray-500">Estimated Cost Savings</h3>
                <p id="cost-savings" class="text-4xl font-bold text-green-600">$0</p>
                <p class="text-sm text-gray-500 mt-1">From avoided inpatient admissions</p>
            </div>
        </div>

        <!-- Charts -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-10">
            <div class="bg-white p-6 rounded-lg shadow-md">
                <h3 class="text-xl font-semibold mb-4 text-center">Medication Adherence Rate Comparison</h3>
                <canvas id="adherenceChart"></canvas>
            </div>
            <div class="bg-white p-6 rounded-lg shadow-md">
                <h3 class="text-xl font-semibold mb-4 text-center">Hospital Admissions per 1,000 Patients</h3>
                <canvas id="admissionsChart"></canvas>
            </div>
        </div>
        
        <!-- Methodology Section -->
        <div class="bg-white p-6 rounded-lg shadow-md">
            <h3 class="text-xl font-semibold mb-4">Project Summary & Methodology</h3>
            <div class="space-y-4 text-gray-700">
                <p>
                    This analysis quantifies the impact of a proactive clinical outreach program on a cohort of 17,000 Medicare Advantage members. The findings demonstrate a strong positive correlation between the intervention, improved medication adherence, reduced hospitalizations, and significant cost savings.
                </p>
                <p>
                    <strong class="font-semibold text-gray-800">Note on Data Privacy:</strong> To protect patient privacy and comply with HIPAA regulations, this analysis utilizes a synthetically generated dataset. The data is carefully constructed to be statistically representative of the actual patient population and program outcomes. Key metrics are modeled on aggregated, de-identified real-world data to ensure the findings accurately reflect the true impact of the intervention without exposing any personal health information.
                </p>
                <p>
                    The cost savings calculation is based on an average cost of <strong class="font-semibold text-gray-800">$14,700</strong> per Medicare Advantage inpatient stay, as reported by AHRQ's HCUP Statistical Brief #262.
                </p>
            </div>
        </div>

    </div>

    <script>
        // Function to fetch data and render the dashboard
        async function loadDashboard() {
            try {
                // In a real scenario, you would place results.json in the same directory.
                // For this demonstration, we will embed the data.
                const data = {
                    "adherence_analysis": [
                        {"group": "Group 1", "total_patients": 8292, "adherent_patients": 6219, "adherence_rate": 75.0},
                        {"group": "Group 2", "total_patients": 8708, "adherent_patients": 4833, "adherence_rate": 55.5}
                    ],
                    "admissions_analysis": [
                        {"group": "Group 1", "total_patients": 8292, "total_admissions": 2080, "admissions_per_1000": 250.84},
                        {"group": "Group 2", "total_patients": 8708, "total_admissions": 2900, "admissions_per_1000": 333.03}
                    ],
                    "summary_findings": {
                        "adherence_uplift_pct": 35.14,
                        "hospitalization_reduction_pct": 24.68,
                        "cost_savings": 1218918.00
                    }
                };

                // Populate KPIs
                document.getElementById('adherence-uplift').textContent = `+${data.summary_findings.adherence_uplift_pct.toFixed(1)}%`;
                document.getElementById('hospitalization-reduction').textContent = `-${data.summary_findings.hospitalization_reduction_pct.toFixed(1)}%`;
                document.getElementById('cost-savings').textContent = `$${data.summary_findings.cost_savings.toLocaleString('en-US', { maximumFractionDigits: 0 })}`;

                // Adherence Chart
                const adherenceCtx = document.getElementById('adherenceChart').getContext('2d');
                new Chart(adherenceCtx, {
                    type: 'bar',
                    data: {
                        labels: data.adherence_analysis.map(d => d.group),
                        datasets: [{
                            label: 'Adherence Rate (%)',
                            data: data.adherence_analysis.map(d => d.adherence_rate),
                            backgroundColor: ['#1E40AF', '#93C5FD'],
                            borderColor: ['#1D4ED8', '#60A5FA'],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: { legend: { display: false } },
                        scales: { y: { beginAtZero: true, max: 100, title: { display: true, text: 'Adherence Rate (%)' } } }
                    }
                });

                // Admissions Chart
                const admissionsCtx = document.getElementById('admissionsChart').getContext('2d');
                new Chart(admissionsCtx, {
                    type: 'bar',
                    data: {
                        labels: data.admissions_analysis.map(d => d.group),
                        datasets: [{
                            label: 'Admissions per 1,000 Patients',
                            data: data.admissions_analysis.map(d => d.admissions_per_1000),
                            backgroundColor: ['#1E40AF', '#93C5FD'],
                            borderColor: ['#1D4ED8', '#60A5FA'],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: { legend: { display: false } },
                        scales: { y: { beginAtZero: true, title: { display: true, text: 'Admissions per 1,000 Patients' } } }
                    }
                });

            } catch (error) {
                console.error("Failed to load dashboard data:", error);
                // You could display an error message on the page here
            }
        }

        // Load the dashboard on page load
        document.addEventListener('DOMContentLoaded', loadDashboard);
    </script>
</body>
</html>
